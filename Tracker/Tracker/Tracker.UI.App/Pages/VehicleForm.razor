@page "/vehicleform"

@using MudBlazor
@using Tracker.UI.App.Data
@inject PatchService PatchService
@inject VehicleService VehicleService

@inherits ComponentBase

<h3>Form Input</h3>

<MudForm>
    <MudTextField Label="Your name" Variant="Variant.Text" @bind-Value="name"></MudTextField>
    <MudButton OnClick="Submit">Submit</MudButton>
</MudForm>

<MudSelect T="string" Label="Select an Item">
    @if (patches == null)
{
    <MudProgressCircular Indeterminate="true" />
}
else
{
    @foreach (var item in patches)
    {
        <MudSelectItem Value="@item.PatchCode">@item.PatchCode</MudSelectItem>
    }
}
</MudSelect>

<MudSelect T="string" Label="Select an Item">
    @if (addressList == null)
    {
        <MudProgressCircular Indeterminate="true" />
    }
    else
    {
        @foreach (var item in addressList)
        {
            <MudSelectItem Value="@item">@item</MudSelectItem>
        }
    }
</MudSelect>

@code {
    private string name; 
    private List<string> addressList = new();
    private PatchDTO[]? patches = null;

    private void Submit()
    {
        Console.WriteLine($"Hello, {name}!");
    }



    protected override async Task OnInitializedAsync()
    {
        patches = await PatchService.GetPatchesAsync();
        addressList = await VehicleService.GetAddressesFromImage("C:\\Users\\mabur\\source\\repos\\williamroy\\Tracker\\Tracker\\Tracker.UI.App\\Data\\test.jpg");
        StateHasChanged();
    }
}
